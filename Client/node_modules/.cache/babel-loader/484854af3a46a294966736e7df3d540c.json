{"ast":null,"code":"import _defineProperty from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Navigate}from\"react-router-dom\";import'./Login.css';import Navbar from'../../Components/Navbar/Navbar';import{Keccak}from'sha3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var axios=require('axios');var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.togglePasswordVisiblity=function(){_this.setState({visiblity:_this.state.visiblity===\"password\"?\"text\":\"password\"});};_this.state={uName:'',pass:'',visiblity:'password',redirect:false,res:null};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"hashMe\",value:function hashMe(pass){var hash=new Keccak(256);hash.reset();hash.update(pass);//add the value to be hashed\nvar temp=hash.digest('hex');//hash the value\nreturn temp;}},{key:\"handleChange\",value:function handleChange(event){var target=event.target;var value=target.value;var object=target.name;this.setState(_defineProperty({},object,object===\"pass\"?this.hashMe(value):value));}},{key:\"handleSubmit\",value:function handleSubmit(event){console.log(this.state.uName);console.log(this.state.pass);axios.post('/loginUser',{userName:this.state.uName,password:this.state.pass}).then(function(response){console.log(response);var res=response.data;if(res.result===\"access granted!\"){localStorage.setItem('jswtoken',res.jwtoken);this.props.setParentUser(res.userName);this.setState({redirect:true});}else{window.location.reload();}}.bind(this)).catch(function(error){console.log(error);});event.preventDefault();}},{key:\"render\",value:function render(){if(this.state.redirect){return/*#__PURE__*/_jsx(Navigate,{to:{pathname:\"/profile/\"+this.state.uName}});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"Login\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"grid\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"uName\",type:\"text\",value:this.state.uName,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"pass\",type:this.state.visiblity,value:this.state.value,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:this.togglePasswordVisiblity}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]})]})]});}}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/Users/trumanchan/scribing/Client/src/Pages/Login/Login.js"],"names":["React","Navigate","Navbar","Keccak","axios","require","Login","props","togglePasswordVisiblity","setState","visiblity","state","uName","pass","redirect","res","handleChange","bind","handleSubmit","hash","reset","update","temp","digest","event","target","value","object","name","hashMe","console","log","post","userName","password","then","response","data","result","localStorage","setItem","jwtoken","setParentUser","window","location","reload","catch","error","preventDefault","pathname","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './Login.css';\nimport Navbar from '../../Components/Navbar/Navbar';\nimport { Keccak } from 'sha3';\nconst axios = require('axios');\n\n\nclass Login extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n                    uName: '',\n                    pass:'',\n                    visiblity: 'password',\n                    redirect: false,\n                    res: null\n                    };\n      this.handleChange = this.handleChange.bind(this);\n      this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n\n  hashMe(pass) {\n    const hash = new Keccak(256);\n    hash.reset();\n    hash.update(pass); //add the value to be hashed\n    const temp = hash.digest('hex'); //hash the value\n    return temp;\n  }\n\n  handleChange(event) {\n      const target = event.target;\n      const value = target.value;\n      const object = target.name;\n      this.setState(\n        {\n          [object]: object === \"pass\" ? this.hashMe(value) : value,\n        }\n      );\n    }\n\n\n  handleSubmit(event) {\n    console.log(this.state.uName);\n    console.log(this.state.pass);\n      axios.post('/loginUser', {\n        userName: this.state.uName,\n        password: this.state.pass\n      })\n      .then(function (response) {\n        console.log(response);\n        let res = response.data;\n        if(res.result === \"access granted!\"){\n          localStorage.setItem('jswtoken', res.jwtoken);\n          this.props.setParentUser(res.userName);\n          this.setState({\n            redirect: true\n          })\n        }else{\n          window.location.reload();\n        }\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n      });\n      event.preventDefault();\n  };\n\n\n  togglePasswordVisiblity = () => {\n      this.setState(\n        {\n            visiblity: this.state.visiblity === \"password\" ? \"text\" : \"password\"\n        }\n      )\n  }\n\n    render() {\n      if(this.state.redirect){\n        return <Navigate\n          to={{\n            pathname: \"/profile/\" + this.state.uName\n          }} />\n      }else{\n        return (\n            <div className=\"Login\">\n                <Navbar />\n                <div className=\"form-container\">\n                    <h1>Log In</h1>\n                    <form className=\"grid\" onSubmit={this.handleSubmit}>\n                        <label>Username:</label>\n                        <input name=\"uName\" type=\"text\" value={this.state.uName} onChange={this.handleChange} />\n                        <label>Password:</label>\n                          <input name=\"pass\" type={this.state.visiblity} value={this.state.value} onChange={this.handleChange} />\n                        <input type=\"checkbox\" onClick={this.togglePasswordVisiblity} />\n                        <input type=\"submit\" value=\"Submit\" />\n                    </form>\n                </div>\n            </div>\n        );\n      }\n    }\n  }\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/trumanchan/scribing/Client/src/Pages/Signup/Signup.js\";\nimport React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './Signup.css';\nimport Navbar from '../../Components/Navbar/Navbar';\nimport { Keccak } from 'sha3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst axios = require('axios');\n\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.togglePasswordVisiblity = () => {\n      this.setState({\n        visiblity: this.state.visiblity === \"password\" ? \"text\" : \"password\"\n      });\n    };\n\n    this.state = {\n      fName: '',\n      lName: '',\n      uName: '',\n      pass: '',\n      visiblity: 'password',\n      redirect: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  hashMe(pass) {\n    console.log(\"original: \" + pass);\n    const hash = new Keccak(256);\n    hash.reset();\n    hash.update(pass);\n    const pass1 = hash.digest('hex');\n    console.log(\"hash1: \" + pass1);\n    hash.reset();\n    const pepper = String.fromCharCode(Math.floor(Math.random() * (90 - 65 + 1)) + 65);\n    console.log(\"pepper: \" + pepper);\n    const pass2 = pass1 + pepper;\n    console.log(\"hash1 + pepper: \" + pass2);\n    hash.update(pass2);\n    const temp = hash.digest('hex');\n    console.log(\"hash2: \" + temp);\n    return temp;\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const object = target.name;\n    this.setState({\n      [object]: object === \"pass\" ? this.hashMe(value) : value\n    });\n  }\n\n  handleSubmit(event) {\n    axios.post('/signUpUser', {\n      firstName: this.state.fName,\n      lastName: this.state.lName,\n      userName: this.state.uName,\n      password: this.state.pass\n    }).then(function (response) {\n      let res = response.data;\n\n      if (res.result === \"access granted!\") {\n        localStorage.setItem('jswtoken', res.jwtoken);\n        this.props.setParentUser(res.userName);\n        this.props.setParentName([this.fName, this.lName]);\n        this.setState({\n          redirect: true\n        });\n      }\n    }.bind(this)).catch(function (error) {\n      console.log(error);\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: {\n          pathname: \"/\",\n          state: {\n            jswt: \"hello\"\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 18\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Signup\",\n        children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"grid\",\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"First Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"fName\",\n              type: \"text\",\n              value: this.state.fName,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Last Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"lName\",\n              type: \"text\",\n              value: this.state.lName,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Username:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"uName\",\n              type: \"text\",\n              value: this.state.uName,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Password:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"pass\",\n              type: this.state.visiblity,\n              value: this.state.value,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              onClick: this.togglePasswordVisiblity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }, this);\n    }\n  }\n\n}\n\nexport default Signup;","map":{"version":3,"sources":["/Users/trumanchan/scribing/Client/src/Pages/Signup/Signup.js"],"names":["React","Navigate","Navbar","Keccak","axios","require","Signup","Component","constructor","props","togglePasswordVisiblity","setState","visiblity","state","fName","lName","uName","pass","redirect","handleChange","bind","handleSubmit","hashMe","console","log","hash","reset","update","pass1","digest","pepper","String","fromCharCode","Math","floor","random","pass2","temp","event","target","value","object","name","post","firstName","lastName","userName","password","then","response","res","data","result","localStorage","setItem","jwtoken","setParentUser","setParentName","catch","error","preventDefault","render","pathname","jswt"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './Signup.css';\nimport Navbar from '../../Components/Navbar/Navbar';\nimport { Keccak } from 'sha3';\nconst axios = require('axios');\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n                      fName: '',\n                      lName: '',\n                      uName: '',\n                      pass:'',\n                      visiblity: 'password',\n                      redirect: false,\n                      };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    hashMe(pass) {\n      console.log(\"original: \" + pass);\n      const hash = new Keccak(256);\n      hash.reset();\n      hash.update(pass);\n      const pass1 = hash.digest('hex');\n      console.log(\"hash1: \" + pass1);\n      hash.reset();\n      const pepper = String.fromCharCode(Math.floor(Math.random() * (90 - 65 + 1)) + 65);\n      console.log(\"pepper: \" + pepper)\n      const pass2  = pass1 + pepper;\n      console.log(\"hash1 + pepper: \" + pass2);\n      hash.update(pass2);\n      const temp = hash.digest('hex');\n      console.log(\"hash2: \" + temp);\n      return temp;\n    }\n\n\n    handleChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const object = target.name;\n        this.setState(\n          {\n            [object]: object === \"pass\" ? this.hashMe(value) : value,\n          }\n        );\n      }\n\n\n    handleSubmit(event) {\n      axios.post('/signUpUser', {\n        firstName: this.state.fName,\n        lastName: this.state.lName,\n        userName: this.state.uName,\n        password: this.state.pass\n      })\n      .then(function (response) {\n        let res = response.data;\n        if(res.result === \"access granted!\"){\n          localStorage.setItem('jswtoken', res.jwtoken);\n          this.props.setParentUser(res.userName);\n          this.props.setParentName([this.fName,this.lName]);\n          this.setState({\n            redirect: true\n          })\n        }\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n      });\n      event.preventDefault();\n    };\n\n    togglePasswordVisiblity = () => {\n        this.setState(\n          {\n              visiblity: this.state.visiblity === \"password\" ? \"text\" : \"password\"\n          }\n        )\n    }\n\n      render() {\n        if(this.state.redirect){\n          return <Navigate\n            to={{\n              pathname: \"/\",\n              state: { jswt: \"hello\" }\n            }} />\n        }else{\n          return (\n              <div className=\"Signup\">\n                  <Navbar />\n                  <div className=\"form-container\">\n                      <h1>Sign Up</h1>\n                      <form className=\"grid\" onSubmit={this.handleSubmit}>\n                          <label>First Name:</label>\n                          <input name=\"fName\" type=\"text\" value={this.state.fName} onChange={this.handleChange} />\n                          <label>Last Name:</label>\n                          <input name=\"lName\" type=\"text\" value={this.state.lName} onChange={this.handleChange} />\n                          <label>Username:</label>\n                          <input name=\"uName\" type=\"text\" value={this.state.uName} onChange={this.handleChange} />\n                          <label>Password:</label>\n                          <input name=\"pass\" type={this.state.visiblity} value={this.state.value} onChange={this.handleChange} />\n                          <input type=\"checkbox\" onClick={this.togglePasswordVisiblity} />\n                          <input type=\"submit\" value=\"Submit\" />\n                      </form>\n                  </div>\n              </div>\n          );\n      }\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}
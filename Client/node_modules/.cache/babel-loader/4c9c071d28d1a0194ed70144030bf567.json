{"ast":null,"code":"import _slicedToArray from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useMemo,useState,useRef}from\"react\";import Navbar from'../../Components/Navbar/Navbar';import socketIOClient from\"socket.io-client\";import WordsPerMin from'../../Components/WordsPerMin/WordsPerMin.js';import LoadingBar from'../../Components/LoadingBar/LoadingBar.js';import{socket}from\"../../services.js\";import'./Multiplayer.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Multiplayer(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),usersPercent=_useState2[0],setUsersPercent=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),score=_useState4[0],setScore=_useState4[1];var _useState5=useState(\"user\"+getRandomInt(100)),_useState6=_slicedToArray(_useState5,2),registeredUser=_useState6[0],setUser=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),playerResponse=_useState8[0],setPlayerResponse=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),currentPlayers=_useState10[0],setCurrentPlayers=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),amountPlayers=_useState12[0],setAmountPlayers=_useState12[1];useEffect(function(){setUser(props.parentUser);},[props]);useEffect(function(){socket.emit('joinRoom',[registeredUser,1]);},[]);useEffect(function(){socket.on('message',function(message){if(!exists(currentPlayers,message[0])){var temp=currentPlayers;temp.push(message);setCurrentPlayers(temp);setAmountPlayers(temp.length);}else{var temp=currentPlayers.length;for(var k=0;k<temp;k++){if(currentPlayers[k][0]==message[0]){currentPlayers[k][1]=message[1];}}}console.log(currentPlayers);});socket.emit('chatMessage',usersPercent);},[usersPercent]);function exists(arr,search){return arr.some(function(row){return row.includes(search);});}function getRandomInt(max){return Math.floor(Math.random()*max);}useEffect(function(){var temp=0;if(currentPlayers.length>temp){temp=currentPlayers.length;console.log(\"new player\");console.log(currentPlayers);console.log(currentPlayers.length);}},[currentPlayers]);function getLoadingBars(){var temp=[];for(var i=0;i<amountPlayers;i++){temp.push(/*#__PURE__*/_jsx(LoadingBar,{userName:currentPlayers[i][0],loadingData:currentPlayers[i][1]}));}return temp;}return/*#__PURE__*/_jsxs(\"div\",{className:\"Multiplayer\",children:[/*#__PURE__*/_jsx(Navbar,{fName:props.parentUser}),/*#__PURE__*/_jsxs(\"div\",{className:\"Multiplayer-container\",children:[getLoadingBars(),/*#__PURE__*/_jsx(\"h3\",{children:\" You \"}),/*#__PURE__*/_jsx(LoadingBar,{userName:registeredUser,loadingData:usersPercent}),/*#__PURE__*/_jsx(WordsPerMin,{setScore:setScore,setUsersPercent:setUsersPercent})]})]});}","map":{"version":3,"sources":["/Users/trumanchan/scribing/Client/src/Pages/Multiplayer/Multiplayer.js"],"names":["React","useEffect","useMemo","useState","useRef","Navbar","socketIOClient","WordsPerMin","LoadingBar","socket","Multiplayer","props","usersPercent","setUsersPercent","score","setScore","getRandomInt","registeredUser","setUser","playerResponse","setPlayerResponse","currentPlayers","setCurrentPlayers","amountPlayers","setAmountPlayers","parentUser","emit","on","message","exists","temp","push","length","k","console","log","arr","search","some","row","includes","max","Math","floor","random","getLoadingBars","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState, useRef } from \"react\";\nimport Navbar from '../../Components/Navbar/Navbar';\nimport socketIOClient from \"socket.io-client\";\nimport WordsPerMin from '../../Components/WordsPerMin/WordsPerMin.js';\nimport LoadingBar from '../../Components/LoadingBar/LoadingBar.js';\nimport {socket} from \"../../services.js\";\nimport './Multiplayer.css';\n\nexport default function Multiplayer(props) {\n  const [usersPercent, setUsersPercent] = useState(0);\n  const [score, setScore] = useState(0);\n  const [registeredUser, setUser] = useState(\"user\" + getRandomInt(100));\n  const [playerResponse, setPlayerResponse] = useState([]);\n  const [currentPlayers, setCurrentPlayers] = useState([]);\n  const [amountPlayers, setAmountPlayers] = useState(0);\n\n  useEffect(() => {\n    setUser(props.parentUser)\n  }, [props]);\n\n  useEffect(() => {\n    socket.emit('joinRoom', [registeredUser, 1 ]);\n  }, []);\n\n  useEffect(() => {\n    socket.on('message', (message) => {\n      if(!exists(currentPlayers,message[0])){\n        var temp = currentPlayers\n        temp.push(message);\n        setCurrentPlayers(temp);\n        setAmountPlayers(temp.length)\n      }else{\n        var temp = currentPlayers.length\n        for(var k = 0; k < temp; k++){\n            if(currentPlayers[k][0] == message[0]){\n                currentPlayers[k][1] = message[1];\n            }\n        }\n      }\n      console.log(currentPlayers)\n    });\n    socket.emit('chatMessage', usersPercent);\n  }, [usersPercent]);\n\n  function exists(arr, search) {\n    return arr.some(row => row.includes(search));\n  }\n\n  function getRandomInt(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n  useEffect(() => {\n    var temp = 0;\n    if(currentPlayers.length > temp){\n      temp = currentPlayers.length\n      console.log(\"new player\")\n      console.log(currentPlayers)\n      console.log(currentPlayers.length)\n    }\n  }, [currentPlayers]);\n\n\n  function getLoadingBars(){\n    let temp = []\n    for(var i = 0; i < amountPlayers; i++){\n      temp.push(<LoadingBar userName={currentPlayers[i][0]} loadingData={currentPlayers[i][1]}/>)\n    }\n    return temp;\n  }\n\n  return (\n    <div className=\"Multiplayer\">\n      <Navbar fName={props.parentUser}/>\n      <div className=\"Multiplayer-container\">\n        {getLoadingBars()}\n        <h3> You </h3>\n        <LoadingBar userName={registeredUser} loadingData={usersPercent}/>\n        <WordsPerMin setScore={setScore} setUsersPercent={setUsersPercent}/>\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}
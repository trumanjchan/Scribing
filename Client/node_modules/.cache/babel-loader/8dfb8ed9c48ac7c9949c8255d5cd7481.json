{"ast":null,"code":"var _jsxFileName = \"/Users/trumanchan/scribing/Client/src/Pages/Login/Login.js\";\nimport React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './Login.css';\nimport Navbar from '../../Components/Navbar/Navbar';\nimport { Keccak } from 'sha3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst axios = require('axios');\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.togglePasswordVisiblity = () => {\n      this.setState({\n        visiblity: this.state.visiblity === \"password\" ? \"text\" : \"password\"\n      });\n    };\n\n    this.state = {\n      uName: '',\n      pass: '',\n      visiblity: 'password',\n      redirect: false,\n      res: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  hashMe(pass) {\n    const hash = new Keccak(256);\n    hash.reset();\n    hash.update(pass); //add the value to be hashed\n\n    const temp = hash.digest('hex'); //hash the value\n\n    return temp;\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const object = target.name;\n    this.setState({\n      [object]: object === \"pass\" ? this.hashMe(value) : value\n    });\n  }\n\n  handleSubmit(event) {\n    console.log(this.state.uName);\n    console.log(this.state.pass);\n    axios.post('/loginUser', {\n      userName: this.state.uName,\n      password: this.state.pass\n    }).then(function (response) {\n      console.log(response);\n      let res = response.data;\n\n      if (res.result === \"access granted!\") {\n        localStorage.setItem('jswtoken', res.jwtoken);\n        this.props.setParentUser(res.userName);\n        this.setState({\n          redirect: true\n        });\n      } else {\n        window.location.reload();\n      }\n    }.bind(this)).catch(function (error) {\n      console.log(error);\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: {\n          pathname: \"/profile/\" + this.state.uName\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 16\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Login\",\n        children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Log In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            className: \"grid\",\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Username:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"uName\",\n              type: \"text\",\n              value: this.state.uName,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Password:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"pass\",\n              type: this.state.visiblity,\n              value: this.state.value,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              onClick: this.togglePasswordVisiblity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"submit\",\n              value: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }, this);\n    }\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/trumanchan/scribing/Client/src/Pages/Login/Login.js"],"names":["React","Navigate","Navbar","Keccak","axios","require","Login","Component","constructor","props","togglePasswordVisiblity","setState","visiblity","state","uName","pass","redirect","res","handleChange","bind","handleSubmit","hashMe","hash","reset","update","temp","digest","event","target","value","object","name","console","log","post","userName","password","then","response","data","result","localStorage","setItem","jwtoken","setParentUser","window","location","reload","catch","error","preventDefault","render","pathname"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './Login.css';\nimport Navbar from '../../Components/Navbar/Navbar';\nimport { Keccak } from 'sha3';\nconst axios = require('axios');\n\n\nclass Login extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n                    uName: '',\n                    pass:'',\n                    visiblity: 'password',\n                    redirect: false,\n                    res: null\n                    };\n      this.handleChange = this.handleChange.bind(this);\n      this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n\n  hashMe(pass) {\n    const hash = new Keccak(256);\n    hash.reset();\n    hash.update(pass); //add the value to be hashed\n    const temp = hash.digest('hex'); //hash the value\n    return temp;\n  }\n\n  handleChange(event) {\n      const target = event.target;\n      const value = target.value;\n      const object = target.name;\n      this.setState(\n        {\n          [object]: object === \"pass\" ? this.hashMe(value) : value,\n        }\n      );\n    }\n\n\n  handleSubmit(event) {\n    console.log(this.state.uName);\n    console.log(this.state.pass);\n      axios.post('/loginUser', {\n        userName: this.state.uName,\n        password: this.state.pass\n      })\n      .then(function (response) {\n        console.log(response);\n        let res = response.data;\n        if(res.result === \"access granted!\"){\n          localStorage.setItem('jswtoken', res.jwtoken);\n          this.props.setParentUser(res.userName);\n          this.setState({\n            redirect: true\n          })\n        }else{\n          window.location.reload();\n        }\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n      });\n      event.preventDefault();\n  };\n\n\n  togglePasswordVisiblity = () => {\n      this.setState(\n        {\n            visiblity: this.state.visiblity === \"password\" ? \"text\" : \"password\"\n        }\n      )\n  }\n\n    render() {\n      if(this.state.redirect){\n        return <Navigate\n          to={{\n            pathname: \"/profile/\" + this.state.uName\n          }} />\n      }else{\n        return (\n            <div className=\"Login\">\n                <Navbar />\n                <div className=\"form-container\">\n                    <h1>Log In</h1>\n                    <form className=\"grid\" onSubmit={this.handleSubmit}>\n                        <label>Username:</label>\n                        <input name=\"uName\" type=\"text\" value={this.state.uName} onChange={this.handleChange} />\n                        <label>Password:</label>\n                          <input name=\"pass\" type={this.state.visiblity} value={this.state.value} onChange={this.handleChange} />\n                        <input type=\"checkbox\" onClick={this.togglePasswordVisiblity} />\n                        <input type=\"submit\" value=\"Submit\" />\n                    </form>\n                </div>\n            </div>\n        );\n      }\n    }\n  }\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}
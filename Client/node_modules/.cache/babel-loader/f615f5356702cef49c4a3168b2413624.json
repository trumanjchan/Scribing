{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useMemo,useState,useRef}from\"react\";import'./WordsPerMin.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var moment=require('moment');var axios=require('axios');var things=['The quick fast agile brown fox jumps over the lazy dog',\"Can we pretend that airplanes in the night sky are like shootin' stars\",'Step by step Heart to heart Left right left We all fall down Like toy soldiers',\"You got designer shades just to hide your face and you wear 'em around like you're cooler than me\",'But one of these things is not like the others Like a rainbow with all of the colors',\"I wanna tell you but I don't know how I can't love you anymore than I do now\",\"You stopped loving me on the dark nights Now you won't kiss me in the sunlight\"];var chosentext=things[Math.floor(Math.random()*things.length)];var text=chosentext.split(' ').sort(function(){return Math.floor(Math.random()*Math.floor(3))-1;}).join(' ');export default function WordsPerMin(props){var _useState=useState(text),_useState2=_slicedToArray(_useState,1),textToType=_useState2[0];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),typedText=_useState4[0],setTypedText=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),timerOn=_useState8[0],setTimeOn=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),wpm=_useState10[0],setWpm=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),test=_useState12[0],setTest=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),gameOver=_useState14[0],setGameOver=_useState14[1];var searchInput=useRef(null);var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),attemptReady=_useState16[0],setAttemptReady=_useState16[1];var parts=useMemo(function(){var splitTextToType=textToType.split(\"\");var endIndexMatch=0;var _iterator=_createForOfIteratorHelper(splitTextToType.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),index=_step$value[0],s=_step$value[1];//for loop to find what the last index of the correctly typed word is\nif(s!==typedText[index]){endIndexMatch=index;break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}return{matchedPart:textToType.slice(0,endIndexMatch),unmatchedPart:textToType.slice(endIndexMatch)};},[typedText]);//react hook to update UI if these two variables change\nuseEffect(function(){var interval=null;if(timerOn){interval=setInterval(function(){setTime(function(prevTime){return prevTime+10;});},10);}else{clearInterval(interval);}return function(){return clearInterval(interval);};},[timerOn]);function handleFocus(){setTimeout(function(){searchInput.current.focus();},1);}var start=function start(){setAttemptReady(false);setTimeOn(true);handleFocus();setTest(\"\");setGameOver(false);};var restart=function restart(){props.setUsersPercent(0);setAttemptReady(true);setTimeOn(false);setTime(0);setTypedText(\"\");setWpm(0);};useEffect(function(){if(!(test.length>=textToType.split(\"\").length)){var seconds=Math.floor(time/1000%60);setWpm(Math.floor(textToType.split(\" \").length*60/seconds));setTest(typedText);}},[parts,textToType,time]);useEffect(function(){props.setUsersPercent(Math.floor(100*test.length/textToType.length));if(test.length===textToType.split(\"\").length){props.setUsersPercent(Math.floor(100*test.length/textToType.length));setTimeOn(false);setGameOver(true);newScorePost();}},[test]);function newScorePost(){props.setScore(wpm);};var disablePaste=function disablePaste(e){e.preventDefault();};if(parts.unmatchedPart.length>=0){return/*#__PURE__*/_jsxs(\"div\",{className:\"WPM\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"information\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"clock\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inline\",children:[(\"0\"+Math.floor(time/1000%60)).slice(-2),\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"inline\",children:(\"0\"+Math.floor(time/100%60)).slice(-2)})]}),attemptReady?/*#__PURE__*/_jsx(\"button\",{className:\"block\",onClick:start,children:\"Start\"}):/*#__PURE__*/_jsx(\"button\",{className:\"block\",onClick:restart,children:\"Restart\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"display\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text\",children:[/*#__PURE__*/_jsx(\"b\",{children:parts.matchedPart}),parts.unmatchedPart]})}),!timerOn?/*#__PURE__*/_jsxs(\"div\",{className:\"information\",children:[\"Your words per minute is \",wpm]}):/*#__PURE__*/_jsx(\"input\",{onPaste:disablePaste,ref:searchInput,disabled:gameOver,value:typedText,onChange:function onChange(e){return setTypedText(e.target.value);}}),timerOn?/*#__PURE__*/_jsxs(\"div\",{className:\"information\",children:[\"Your current WPM: \",wpm]}):null,/*#__PURE__*/_jsx(\"div\",{className:\"full-sentence\",children:/*#__PURE__*/_jsx(\"i\",{children:chosentext})})]});}else{return null;}}","map":{"version":3,"sources":["/Users/trumanchan/scribing/Client/src/Components/WordsPerMin/WordsPerMin.js"],"names":["React","useEffect","useMemo","useState","useRef","moment","require","axios","things","chosentext","Math","floor","random","length","text","split","sort","join","WordsPerMin","props","textToType","typedText","setTypedText","time","setTime","timerOn","setTimeOn","wpm","setWpm","test","setTest","gameOver","setGameOver","searchInput","attemptReady","setAttemptReady","parts","splitTextToType","endIndexMatch","entries","index","s","matchedPart","slice","unmatchedPart","interval","setInterval","prevTime","clearInterval","handleFocus","setTimeout","current","focus","start","restart","setUsersPercent","seconds","newScorePost","setScore","disablePaste","e","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useMemo, useState, useRef } from \"react\";\nimport './WordsPerMin.css';\n\nvar moment = require('moment');\nconst axios = require('axios');\n\nconst things = ['The quick fast agile brown fox jumps over the lazy dog', \"Can we pretend that airplanes in the night sky are like shootin' stars\", 'Step by step Heart to heart Left right left We all fall down Like toy soldiers', \"You got designer shades just to hide your face and you wear 'em around like you're cooler than me\", 'But one of these things is not like the others Like a rainbow with all of the colors', \"I wanna tell you but I don't know how I can't love you anymore than I do now\", \"You stopped loving me on the dark nights Now you won't kiss me in the sunlight\"];\nconst chosentext = things[Math.floor(Math.random()*things.length)];\nconst text = chosentext.split(' ').sort(() => Math.floor(Math.random() * Math.floor(3)) - 1).join(' ');\n\nexport default function WordsPerMin(props) {\n  const [textToType] = useState(text);\n  const [typedText, setTypedText] = useState(\"\");\n  const [time, setTime] = useState(0);\n  const [timerOn, setTimeOn] = useState(false);\n  const [wpm, setWpm] = useState(0);\n  const [test, setTest] = useState(\"\");\n  const [gameOver, setGameOver] = useState(false);\n  const searchInput = useRef(null);\n  const [attemptReady, setAttemptReady] = useState(true);\n\n\n  const parts = useMemo(() => {\n    const splitTextToType = textToType.split(\"\");\n    let endIndexMatch = 0;\n    for (const [index, s] of splitTextToType.entries()) { //for loop to find what the last index of the correctly typed word is\n      if (s !== typedText[index]) {\n        endIndexMatch = index;\n        break;\n      }\n    }\n        return {\n          matchedPart: textToType.slice(0, endIndexMatch),\n          unmatchedPart: textToType.slice(endIndexMatch)\n      }\n  }, [typedText]); //react hook to update UI if these two variables change\n\n\n  useEffect(() => {\n    let interval = null;\n    if(timerOn){\n      interval = setInterval(() => {\n        setTime(prevTime => prevTime + 10);\n      }, 10);\n    }else{\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  },[timerOn]);\n\n\n  function handleFocus(){\n    setTimeout(function () {\n      searchInput.current.focus();\n    }, 1);\n  }\n\n  const start = () => {\n    setAttemptReady(false);\n    setTimeOn(true);\n    handleFocus();\n    setTest(\"\");\n    setGameOver(false);\n  };\n\n  const restart = () => {\n    props.setUsersPercent(0);\n    setAttemptReady(true);\n    setTimeOn(false);\n    setTime(0);\n    setTypedText(\"\");\n    setWpm(0);\n  };\n\n  useEffect(() => {\n    if (!(test.length >= (textToType.split(\"\").length))) {\n      let seconds = Math.floor((time / 1000) % 60);\n      setWpm(Math.floor(textToType.split(\" \").length * 60 / seconds));\n      setTest(typedText);\n    }\n  }, [parts, textToType, time]);\n\n\n  useEffect(() => {\n    props.setUsersPercent(Math.floor(100 * test.length/textToType.length));\n    if(test.length === (textToType.split(\"\").length)){\n      props.setUsersPercent(Math.floor(100 * test.length/textToType.length));\n      setTimeOn(false);\n      setGameOver(true);\n      newScorePost();\n  }\n\n  }, [test]);\n\n  function newScorePost(){\n    props.setScore(wpm)\n\n  };\n\n  const disablePaste = (e) => {\n    e.preventDefault();\n  };\n\n\n  if (parts.unmatchedPart.length >= 0) {\n    return (\n      <div className=\"WPM\">\n        <div className=\"information\">\n          <div className=\"clock\">\n            <div className=\"inline\">{(\"0\" + Math.floor((time / 1000) % 60)).slice(-2)}:</div>\n            <div className=\"inline\">{(\"0\" + Math.floor((time / 100) % 60)).slice(-2)}</div>\n          </div>\n          {attemptReady ? <button className=\"block\" onClick={start}>Start</button> : <button className=\"block\" onClick={restart}>Restart</button>}\n        </div>\n\n        <div className=\"display\">\n          <div className=\"text\">\n            <b>{parts.matchedPart}</b>\n            {parts.unmatchedPart}\n          </div>\n        </div>\n\n        {!timerOn ? <div className=\"information\">\n          Your words per minute is {wpm}\n          </div> : <input\n          onPaste={disablePaste}\n          ref={searchInput}\n          disabled={gameOver}\n          value={typedText}\n          onChange={(e) => setTypedText(e.target.value)}\n        />}\n        {timerOn ? <div className=\"information\">Your current WPM: {wpm}</div> : null}\n        <div className=\"full-sentence\"><i>{chosentext}</i></div>\n      </div>\n    );\n  } else {\n    return (\n      null\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/trumanchan/scribing/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Navigate}from\"react-router-dom\";import'./Signup.css';import Navbar from'../../Components/Navbar/Navbar';import{Keccak}from'sha3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var axios=require('axios');var Signup=/*#__PURE__*/function(_React$Component){_inherits(Signup,_React$Component);var _super=_createSuper(Signup);function Signup(props){var _this;_classCallCheck(this,Signup);_this=_super.call(this,props);_this.togglePasswordVisiblity=function(){_this.setState({visiblity:_this.state.visiblity===\"password\"?\"text\":\"password\"});};_this.state={fName:'',lName:'',uName:'',pass:'',visiblity:'password',redirect:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Signup,[{key:\"hashMe\",value:function hashMe(pass){console.log(\"original: \"+pass);var hash=new Keccak(256);hash.reset();hash.update(pass);var pass1=hash.digest('hex');console.log(\"hash1: \"+pass1);hash.reset();var pepper=String.fromCharCode(Math.floor(Math.random()*(90-65+1))+65);console.log(\"pepper: \"+pepper);var pass2=pass1+pepper;console.log(\"hash1 + pepper: \"+pass2);hash.update(pass2);var temp=hash.digest('hex');console.log(\"hash2: \"+temp);return temp;}},{key:\"handleChange\",value:function handleChange(event){var target=event.target;var value=target.value;var object=target.name;this.setState(_defineProperty({},object,object===\"pass\"?this.hashMe(value):value));}},{key:\"handleSubmit\",value:function handleSubmit(event){axios.post('/signUpUser',{firstName:this.state.fName,lastName:this.state.lName,userName:this.state.uName,password:this.state.pass}).then(function(response){var res=response.data;if(res.result===\"access granted!\"){localStorage.setItem('jswtoken',res.jwtoken);this.props.setParentUser(res.userName);this.props.setParentName([this.fName,this.lName]);this.setState({redirect:true});}}.bind(this)).catch(function(error){console.log(error);});event.preventDefault();}},{key:\"render\",value:function render(){if(this.state.redirect){return/*#__PURE__*/_jsx(Navigate,{to:{pathname:\"/\",state:{jswt:\"hello\"}}});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"Signup\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"grid\",onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"fName\",type:\"text\",value:this.state.fName,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Last Name:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lName\",type:\"text\",value:this.state.lName,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"uName\",type:\"text\",value:this.state.uName,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"pass\",type:this.state.visiblity,value:this.state.value,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onClick:this.togglePasswordVisiblity}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]})]})]});}}}]);return Signup;}(React.Component);export default Signup;","map":{"version":3,"sources":["/Users/trumanchan/scribing/Client/src/Pages/Signup/Signup.js"],"names":["React","Navigate","Navbar","Keccak","axios","require","Signup","props","togglePasswordVisiblity","setState","visiblity","state","fName","lName","uName","pass","redirect","handleChange","bind","handleSubmit","console","log","hash","reset","update","pass1","digest","pepper","String","fromCharCode","Math","floor","random","pass2","temp","event","target","value","object","name","hashMe","post","firstName","lastName","userName","password","then","response","res","data","result","localStorage","setItem","jwtoken","setParentUser","setParentName","catch","error","preventDefault","pathname","jswt","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Navigate } from \"react-router-dom\";\nimport './Signup.css';\nimport Navbar from '../../Components/Navbar/Navbar';\nimport { Keccak } from 'sha3';\nconst axios = require('axios');\n\nclass Signup extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n                      fName: '',\n                      lName: '',\n                      uName: '',\n                      pass:'',\n                      visiblity: 'password',\n                      redirect: false,\n                      };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    hashMe(pass) {\n      console.log(\"original: \" + pass);\n      const hash = new Keccak(256);\n      hash.reset();\n      hash.update(pass);\n      const pass1 = hash.digest('hex');\n      console.log(\"hash1: \" + pass1);\n      hash.reset();\n      const pepper = String.fromCharCode(Math.floor(Math.random() * (90 - 65 + 1)) + 65);\n      console.log(\"pepper: \" + pepper)\n      const pass2  = pass1 + pepper;\n      console.log(\"hash1 + pepper: \" + pass2);\n      hash.update(pass2);\n      const temp = hash.digest('hex');\n      console.log(\"hash2: \" + temp);\n      return temp;\n    }\n\n\n    handleChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const object = target.name;\n        this.setState(\n          {\n            [object]: object === \"pass\" ? this.hashMe(value) : value,\n          }\n        );\n      }\n\n\n    handleSubmit(event) {\n      axios.post('/signUpUser', {\n        firstName: this.state.fName,\n        lastName: this.state.lName,\n        userName: this.state.uName,\n        password: this.state.pass\n      })\n      .then(function (response) {\n        let res = response.data;\n        if(res.result === \"access granted!\"){\n          localStorage.setItem('jswtoken', res.jwtoken);\n          this.props.setParentUser(res.userName);\n          this.props.setParentName([this.fName,this.lName]);\n          this.setState({\n            redirect: true\n          })\n        }\n      }.bind(this))\n      .catch(function (error) {\n        console.log(error);\n      });\n      event.preventDefault();\n    };\n\n    togglePasswordVisiblity = () => {\n        this.setState(\n          {\n              visiblity: this.state.visiblity === \"password\" ? \"text\" : \"password\"\n          }\n        )\n    }\n\n      render() {\n        if(this.state.redirect){\n          return <Navigate\n            to={{\n              pathname: \"/\",\n              state: { jswt: \"hello\" }\n            }} />\n        }else{\n          return (\n              <div className=\"Signup\">\n                  <Navbar />\n                  <div className=\"form-container\">\n                      <h1>Sign Up</h1>\n                      <form className=\"grid\" onSubmit={this.handleSubmit}>\n                          <label>First Name:</label>\n                          <input name=\"fName\" type=\"text\" value={this.state.fName} onChange={this.handleChange} />\n                          <label>Last Name:</label>\n                          <input name=\"lName\" type=\"text\" value={this.state.lName} onChange={this.handleChange} />\n                          <label>Username:</label>\n                          <input name=\"uName\" type=\"text\" value={this.state.uName} onChange={this.handleChange} />\n                          <label>Password:</label>\n                          <input name=\"pass\" type={this.state.visiblity} value={this.state.value} onChange={this.handleChange} />\n                          <input type=\"checkbox\" onClick={this.togglePasswordVisiblity} />\n                          <input type=\"submit\" value=\"Submit\" />\n                      </form>\n                  </div>\n              </div>\n          );\n      }\n  }\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}